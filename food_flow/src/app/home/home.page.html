<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-content>
      <!-- Header Principal -->
      <div class="header-container">
        <div class="header-top">
          <div class="logo-section">
            <div class="logo-icon">
              <span>D</span>
            </div>
            <h1 class="logo-text">DeliveryApp</h1>
          </div>
          <ion-button fill="clear" (click)="onProfileClick()">
            <ion-icon name="person-outline"></ion-icon>
          </ion-button>
        </div>

        <!-- Endereço de Entrega -->
        <div class="delivery-address">
          <ion-icon name="location-outline" class="location-icon"></ion-icon>
          <div class="address-info">
            <p class="address-label">Entregar em</p>
            <p class="address-text">{{ userAddress }}</p>
          </div>
        </div>

        <!-- Barra de Busca -->
        <div class="search-container">
          <ion-icon name="search-outline" class="search-icon"></ion-icon>
          <ion-searchbar 
            placeholder="Buscar restaurantes ou pratos..." 
            [(ngModel)]="searchQuery"
            (ionInput)="onSearchChange($event)"
            class="custom-searchbar">
          </ion-searchbar>
        </div>
      </div>
    </ion-content>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Carregando restaurantes...</p>
  </div>

  <!-- Content when loaded -->
  <div *ngIf="!loading">
    <!-- Seção de Destaque -->
    <section class="featured-section">
      <div class="featured-card">
        <div class="featured-image">
          <img src="assets/images/hero-burger.jpg" alt="Hambúrguer em destaque">
          <div class="featured-overlay"></div>
        </div>
        <div class="featured-content">
          <h2 class="featured-title">Promoção Especial!</h2>
          <p class="featured-description">Hambúrguer Gourmet com 30% de desconto</p>
          <div class="featured-info">
            <div class="rating">
              <ion-icon name="star" class="star-icon"></ion-icon>
              <span>4.8</span>
            </div>
            <div class="delivery-time">
              <ion-icon name="time-outline"></ion-icon>
              <span>25-35 min</span>
            </div>
          </div>
          <ion-button 
            fill="solid" 
            color="light" 
            size="small"
            (click)="onOrderNow()"
            class="order-button">
            Pedir Agora
          </ion-button>
        </div>
      </div>
    </section>

    <!-- Seção de Categorias -->
    <section class="categories-section">
      <h2 class="section-title">Categorias</h2>
      <div class="categories-grid">
        <div 
          class="category-card" 
          *ngFor="let category of categories"
          (click)="onCategoryClick(category)">
          <div class="category-icon" [ngClass]="category.color">
            <ion-icon [name]="category.icon"></ion-icon>
          </div>
          <span class="category-name">{{ category.name }}</span>
        </div>
      </div>
    </section>

    <!-- Seção de Restaurantes -->
    <section class="restaurants-section">
      <h2 class="section-title">Restaurantes próximos</h2>
      
      <!-- Empty State -->
      <div *ngIf="featuredRestaurants.length === 0" class="empty-state">
        <ion-icon name="restaurant-outline" class="empty-icon"></ion-icon>
        <p>Nenhum restaurante encontrado</p>
        <ion-button fill="clear" (click)="loadData()">
          Tentar novamente
        </ion-button>
      </div>

      <!-- Restaurants Grid -->
      <div class="restaurants-grid" *ngIf="featuredRestaurants.length > 0">
        <div 
          class="restaurant-card" 
          *ngFor="let restaurant of featuredRestaurants"
          (click)="onRestaurantClick(restaurant)">
          
          <div class="restaurant-image">
            <img [src]="restaurant.image" [alt]="restaurant.name">
            
            <!-- Badges -->
            <div class="restaurant-badges">
              <ion-badge 
                *ngIf="restaurant.discount" 
                color="danger" 
                class="discount-badge">
                {{ restaurant.discount.percentage }}% OFF
              </ion-badge>
              <ion-badge 
                *ngIf="restaurant.isNew" 
                color="success" 
                class="new-badge">
                Novo
              </ion-badge>
            </div>
          </div>

          <div class="restaurant-info">
            <h3 class="restaurant-name">{{ restaurant.name }}</h3>
            <p class="restaurant-cuisine">{{ restaurant.cuisine }}</p>
            
            <div class="restaurant-details">
              <div class="rating">
                <ion-icon name="star" class="star-icon"></ion-icon>
                <span>{{ restaurant.rating }}</span>
              </div>
              
              <div class="delivery-time">
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ restaurant.deliveryTime }}</span>
              </div>
              
              <div class="delivery-fee">
                <ion-icon name="car-outline"></ion-icon>
                <span>{{ formatDeliveryFee(restaurant.deliveryFee) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</ion-content>

<!-- Botão do Carrinho Flutuante -->
<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button 
    color="primary" 
    (click)="onCartClick()"
    class="cart-fab">
    <ion-icon name="cart-outline"></ion-icon>
    <ion-badge color="danger" class="cart-badge">3</ion-badge>
  </ion-fab-button>
</ion-fab>
